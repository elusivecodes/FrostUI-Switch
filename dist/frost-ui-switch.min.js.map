{"version":3,"names":["Switch","BaseComponent","constructor","node","options","super","this","_render","_refresh","_refreshDisabled","_events","_currentX","_toggleWidth","checked","$","getProperty","_node","_animateState","disable","setAttribute","disabled","dispose","remove","_outerContainer","removeEvent","removeAttribute","removeClass","classes","hide","_container","_onToggle","_divider","_offToggle","enable","getState","setState","toggleState","defaults","size","onStyle","offStyle","dividerStyle","onText","offText","labelWidth","dividerWidth","animate","duration","outer","switch","toggleDivider","toggleOff","toggleOn","proto","prototype","getDataset","targetX","progress","stop","finish","Math","abs","_options","setStyle","transform","_setState","removeDataset","progressRemaining","setDataset","uiAnimating","newProgress","_lerp","then","_","catch","startX","addEvent","focus","e","skipUpdate","code","button","dragEvent","mouseDragFactory","pos","getPosition","x","uiSliding","currentX","_clamp","setTimeout","max","width","_dividerWidth","outerWidth","totalWidth","is","addClass","create","class","attributes","tabindex","text","append","before","setProperty","data","triggerEvent","initComponent"],"sources":["../src/js/switch.js","../src/js/index.js","../src/js/prototype/helpers.js","../src/js/prototype/events.js","../src/js/prototype/render.js"],"sourcesContent":["import $ from '@fr0st/query';\nimport { BaseComponent } from '@fr0st/ui';\n\n/**\n * Switch Class\n * @class\n */\nexport default class Switch extends BaseComponent {\n    /**\n     * New Switch constructor.\n     * @param {HTMLElement} node The input node.\n     * @param {object} [options] The options to create the Switch with.\n     */\n    constructor(node, options) {\n        super(node, options);\n\n        this._render();\n        this._refresh();\n        this._refreshDisabled();\n        this._events();\n\n        this._currentX = -this._toggleWidth;\n\n        const checked = $.getProperty(this._node, 'checked');\n        this._animateState(checked);\n    }\n\n    /**\n     * Disable the Switch.\n     */\n    disable() {\n        $.setAttribute(this._node, { disabled: true });\n        this._refreshDisabled();\n    }\n\n    /**\n     * Dispose the Switch.\n     */\n    dispose() {\n        $.remove(this._outerContainer);\n        $.removeEvent(this._node, 'focus.ui.switch');\n        $.removeEvent(this._node, 'change.ui.switch');\n        $.removeAttribute(this._node, 'tabindex');\n        $.removeClass(this._node, this.constructor.classes.hide);\n\n        this._outerContainer = null;\n        this._container = null;\n        this._onToggle = null;\n        this._divider = null;\n        this._offToggle = null;\n\n        super.dispose();\n    }\n\n    /**\n     * Enable the Switch.\n     */\n    enable() {\n        $.removeAttribute(this._node, 'disabled');\n        this._refreshDisabled();\n    }\n\n    /**\n     * Get the switch checkbox state.\n     * @return {Boolean} Whether the switch checkbox is enabled.\n     */\n    getState() {\n        return $.getProperty(this._node, 'checked');\n    }\n\n    /**\n     * Set the switch checkbox state.\n     * @param {Boolean} checked Whether to enable the switch checkbox.\n     */\n    setState(checked) {\n        this._animateState(checked);\n    }\n\n    /**\n     * Toggle switch checkbox state.\n     */\n    toggleState() {\n        const checked = this.getState();\n        this._animateState(!checked);\n    }\n}\n","import { initComponent } from '@fr0st/ui';\nimport Switch from './switch.js';\nimport { _events } from './prototype/events.js';\nimport { _animateState, _refresh, _refreshDisabled, _setState } from './prototype/helpers.js';\nimport { _render } from './prototype/render.js';\n\n// Switch default options\nSwitch.defaults = {\n    size: 'md',\n    onStyle: 'text-bg-primary',\n    offStyle: 'text-bg-secondary',\n    dividerStyle: 'bg-body-tertiary',\n    onText: 'ON',\n    offText: 'OFF',\n    labelWidth: null,\n    dividerWidth: null,\n    animate: true,\n    duration: 500,\n};\n\n// Switch class names\nSwitch.classes = {\n    disabled: 'switch-disabled',\n    hide: 'visually-hidden',\n    outer: 'switch-outer',\n    switch: 'switch',\n    toggleDivider: 'switch-toggle-divider',\n    toggleOff: 'switch-toggle-off',\n    toggleOn: 'switch-toggle-on',\n};\n\n// Switch prototype\nconst proto = Switch.prototype;\n\nproto._animateState = _animateState;\nproto._events = _events;\nproto._refresh = _refresh;\nproto._refreshDisabled = _refreshDisabled;\nproto._render = _render;\nproto._setState = _setState;\n\n// Switch init\ninitComponent('switch', Switch);\n\nexport default Switch;\n","import $ from '@fr0st/query';\n\n/**\n * Animate the switch checkbox state.\n * @param {Boolean} checked Whether to enable the switch checkbox.\n */\nexport function _animateState(checked) {\n    if ($.getDataset(this._container, 'uiSliding')) {\n        return;\n    }\n\n    if ($.getDataset(this._container, 'uiAnimating')) {\n        $.stop(this._container, { finish: false });\n    }\n\n    let targetX; let progress;\n    if (checked) {\n        targetX = 0;\n        progress = (this._toggleWidth - Math.abs(this._currentX)) / this._toggleWidth;\n    } else {\n        targetX = -this._toggleWidth;\n        progress = Math.abs(this._currentX) / this._toggleWidth;\n    }\n\n    if (!this._options.animate || progress >= 1) {\n        $.setStyle(this._container, { transform: `translateX(${targetX}px)` });\n        this._currentX = targetX;\n        this._setState(checked);\n        $.removeDataset(this._container, 'uiAnimating');\n        return;\n    }\n\n    const progressRemaining = 1 - progress;\n\n    $.setDataset(this._container, { uiAnimating: true });\n\n    $.animate(\n        this._container,\n        (node, newProgress) => {\n            this._currentX = $._lerp(this._currentX, targetX, progress + (newProgress * progressRemaining));\n            $.setStyle(node, { transform: `translateX(${this._currentX}px)` });\n        },\n        {\n            duration: this._options.duration * progressRemaining,\n        },\n    ).then((_) => {\n        $.removeDataset(this._container, 'uiAnimating');\n        this._currentX = targetX;\n        this._setState(checked);\n    }).catch((_) => {\n        $.removeDataset(this._container, 'uiAnimating');\n    });\n};\n\n/**\n * Refresh the label/divider widths.\n */\nexport function _refresh() {\n    if (this._options.labelWidth) {\n        this._toggleWidth = this._options.labelWidth;\n    } else {\n        this._toggleWidth = Math.max(\n            $.width(this._onToggle),\n            $.width(this._offToggle),\n        );\n    }\n\n    if (this._options.dividerWidth) {\n        this._dividerWidth = this._options.dividerWidth;\n    } else {\n        this._dividerWidth = this._toggleWidth / 2;\n    }\n\n    const outerWidth = this._toggleWidth + this._dividerWidth;\n    const totalWidth = (this._toggleWidth * 2) + this._dividerWidth;\n\n    $.setStyle(this._outerContainer, { width: `${outerWidth}px` });\n    $.setStyle(this._container, {\n        width: `${totalWidth}px`,\n        transform: `translateX(${-this._toggleWidth}px)`,\n    });\n    $.setStyle(this._onToggle, { width: `${this._toggleWidth}px` });\n    $.setStyle(this._divider, { width: `${this._dividerWidth}px` });\n    $.setStyle(this._offToggle, { width: `${this._toggleWidth}px` });\n};\n\n/**\n * Refresh the disabled styling.\n */\nexport function _refreshDisabled() {\n    if ($.is(this._node, ':disabled')) {\n        $.addClass(this._outerContainer, this.constructor.classes.disabled);\n    } else {\n        $.removeClass(this._outerContainer, this.constructor.classes.disabled);\n    }\n};\n\n/**\n * Set the switch checkbox state.\n * @param {Boolean} checked Whether to enable the switch checkbox.\n */\nexport function _setState(checked) {\n    if (this.getState() === checked) {\n        return;\n    }\n\n    $.setProperty(this._node, { checked }, { data: { skipUpdate: true } });\n    $.triggerEvent(this._node, 'change.ui.switch');\n};\n","import $ from '@fr0st/query';\nimport { getPosition } from '@fr0st/ui';\n\n/**\n * Attach events for the Switch.\n */\nexport function _events() {\n    $.addEvent(this._node, 'focus.ui.switch', (_) => {\n        $.focus(this._outerContainer);\n    });\n\n    $.addEvent(this._node, 'change.ui.switch', (e) => {\n        if (\n            e.skipUpdate ||\n            $.getDataset(this._container, 'uiAnimating') ||\n            $.getDataset(this._container, 'uiSliding')\n        ) {\n            return;\n        }\n\n        const checked = this.getState();\n        this._animateState(checked);\n    });\n\n    $.addEvent(this._outerContainer, 'keyup.ui.switch', (e) => {\n        if (\n            e.code !== 'Space' ||\n            $.getDataset(this._container, 'uiAnimating') ||\n            $.getDataset(this._container, 'uiSliding')\n        ) {\n            return;\n        }\n\n        this.toggleState();\n    });\n\n    $.addEvent(this._outerContainer, 'click.ui.switch', (e) => {\n        if (\n            e.button ||\n            $.getDataset(this._container, 'uiAnimating') ||\n            $.getDataset(this._container, 'uiSliding')\n        ) {\n            return;\n        }\n\n        this.toggleState();\n    });\n\n    let startX;\n\n    const downEvent = (e) => {\n        if (\n            e.button ||\n            $.getDataset(this._container, 'uiAnimating') ||\n            $.getDataset(this._container, 'uiSliding')\n        ) {\n            return false;\n        }\n\n        const pos = getPosition(e);\n        startX = pos.x - this._currentX;\n    };\n\n    const moveEvent = (e) => {\n        if (!$.getDataset(this._container, 'uiSliding')) {\n            $.setDataset(this._container, { uiSliding: true });\n        }\n\n        const pos = getPosition(e);\n        const currentX = pos.x;\n        this._currentX = $._clamp(currentX - startX, -this._toggleWidth, 0);\n\n        $.setStyle(this._container, { transform: `translateX(${this._currentX}px)` });\n    };\n\n    const upEvent = (_) => {\n        if (!$.getDataset(this._container, 'uiSliding')) {\n            return;\n        }\n\n        const checked = Math.abs(this._currentX) < this._toggleWidth / 2;\n\n        setTimeout((_) => {\n            $.removeDataset(this._container, 'uiSliding');\n\n            this._animateState(checked);\n        }, 0);\n    };\n\n    const dragEvent = $.mouseDragFactory(downEvent, moveEvent, upEvent);\n\n    $.addEvent(this._outerContainer, 'mousedown.ui.switch touchstart.ui.switch', dragEvent);\n};\n","import $ from '@fr0st/query';\n\n/**\n * Render the switch.\n */\nexport function _render() {\n    this._outerContainer = $.create('div', {\n        class: [\n            this.constructor.classes.outer,\n            `switch-${this._options.size}`,\n        ],\n        attributes: {\n            tabindex: 0,\n        },\n    });\n\n    this._container = $.create('div', {\n        class: this.constructor.classes.switch,\n    });\n\n    this._onToggle = $.create('div', {\n        class: [this.constructor.classes.toggleOn, this._options.onStyle],\n        text: this._options.onText,\n    });\n\n    this._divider = $.create('div', {\n        class: [this.constructor.classes.toggleDivider, this._options.dividerStyle],\n        text: '',\n    });\n\n    this._offToggle = $.create('div', {\n        class: [this.constructor.classes.toggleOff, this._options.offStyle],\n        text: this._options.offText,\n    });\n\n    $.append(this._container, this._onToggle);\n    $.append(this._container, this._divider);\n    $.append(this._container, this._offToggle);\n    $.append(this._outerContainer, this._container);\n\n    // hide the input node\n    $.addClass(this._node, this.constructor.classes.hide);\n    $.setAttribute(this._node, { tabindex: -1 });\n\n    $.before(this._node, this._outerContainer);\n};\n"],"mappings":"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"}